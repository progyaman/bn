<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">موقف اعداد الزائرين</ui:define>


    <ui:define name="content">
        <h:form id="form">
            <div class="p-grid crud">
                <div class="p-col-12">
                    <h:panelGroup>
                        <div class="card">
                            <h2>موقف الوافدين</h2>
                            <p:divider/>
                            <p:growl id="messages" showDetail="true"/>

                            <p:toolbar styleClass="p-mb-4">
                                <p:toolbarGroup>
                                    <p:linkButton rendered="#{request.isUserInRole('PositionOfArrivals Create')}"
                                                  value="اضافة موقف جديد"
                                                  outcome="create"
                                                  icon="pi pi-plus" process="@this"/>
                                </p:toolbarGroup>
                            </p:toolbar>

                            <p:dataTable stripedRows="true" dir="rtl" id="dt-Arrivals" widgetVar="dtArrivals"
                                         var="ArrivalsVar"
                                         style="text-align: center"
                                         value="#{positionOfArrivalsListController.list}" reflow="true"
                                         emptyMessage="لا توجد تنظيمات مضافة"
                                         paginator="true" rows="20"
                                         size="small"
                                         rendered="#{request.isUserInRole('PositionOfArrivals View')}"
                                         paginatorPosition="bottom">
                                <f:facet name="header">
                                    <div class="products-table-header p-py-4" style="text-align: right">
                                    <span class="filter-container ui-input-icon-right">
                                        <i class="pi pi-search"></i>
                                        <p:inputText id="globalFilter" styleClass="preventEnter"
                                                     onkeyup="PF('dtArrivals').filter()"
                                                     placeholder="البحث ..."/>
                                    </span>
                                    </div>
                                </f:facet>
                                <p:column filterMatchMode="contains" exportable="false" width="120"
                                          headerText="تعديل / حـذف">
                                    <p:linkButton rendered="#{request.isUserInRole('PositionOfArrivals Update')}"
                                                  icon="pi pi-pencil"
                                                  outcome="create"
                                                  styleClass="edit-button rounded-button  p-m-2" process="@this">
                                        <f:param name="id" value="#{ArrivalsVar.id}"/>
                                    </p:linkButton>
                                    <p:commandButton rendered="#{request.isUserInRole('PositionOfArrivals Delete')}"
                                                     class="ui-button-danger rounded-button p-m-2" icon="pi pi-trash"
                                                     process="@this" oncomplete="PF('deleteProductDialog').show()">
                                        <f:setPropertyActionListener value="#{ArrivalsVar}"
                                                                     target="#{positionOfArrivalsListController.selected}"/>

                                    </p:commandButton>

                                </p:column>



                                <p:column headerText="التاريخ" style="text-align: center" width="260"
                                          filterMatchMode="between"
                                          sortBy="#{ArrivalsVar.date}"
                                          filterBy="#{ArrivalsVar.date}">
                                    <h:outputText
                                            value="#{ArrivalsVar.date}"/>
                                    <f:facet name="filter">
                                        <p:datePicker style="text-align: center" showButtonBar="true" selectionMode="range"
                                                      onchange="PF('dtArrivals').filter()" styleClass="preventEnter"/>
                                    </f:facet>
                                </p:column>

                                <p:column filterMatchMode="contains" headerText="عدد الوافدين "
                                          sortBy="#{ArrivalsVar.numberOfArrivals}"
                                          filterBy="#{ArrivalsVar.numberOfArrivals}" width="90">
                                    <h:outputText value="#{ArrivalsVar.numberOfArrivals}"/>
                                </p:column>

                                <p:column filterMatchMode="contains" headerText="عدد المغادرين "
                                          sortBy="#{ArrivalsVar.numberOfDepartures}"
                                          filterBy="#{ArrivalsVar.numberOfDepartures}" width="90">
                                    <h:outputText value="#{ArrivalsVar.numberOfDepartures}"/>
                                </p:column>



                                <p:column filterMatchMode="contains" headerText="الجنسية" width="150"
                                          filterBy="#{ArrivalsVar.nationality}">
                                    <h:outputText value="#{ArrivalsVar.nationality}"/>
                                </p:column>
                                <p:column filterMatchMode="contains" headerText="المنفذ الحدودي/المطار" width="150"
                                          filterBy="#{ArrivalsVar.borderCrossingPoint}">
                                    <h:outputText value="#{ArrivalsVar.borderCrossingPoint}"/>
                                </p:column>

                            </p:dataTable>




                            <p:confirmDialog widgetVar="deleteProductDialog" showEffect="fade" width="300"
                                             message="هل انت متأكد من الحذف ؟" header="تأكيد الحذف" severity="warn">
                                <p:commandButton value="نعم" icon="pi pi-check"
                                                 actionListener="#{positionOfArrivalsListController.delete()}"
                                                 action="#{positionOfArrivalsListController.inti()}"
                                                 process="dt-Arrivals,@this"
                                                 update="dt-Arrivals @this messages"
                                                 oncomplete="PF('deleteProductDialog').hide()"/>
                                <p:commandButton value="كلا" type="button" styleClass="ui-button-secondary"
                                                 icon="pi pi-times" onclick="PF('deleteProductDialog').hide()"/>
                            </p:confirmDialog>


                        </div>
                    </h:panelGroup>
                </div>
            </div>
        </h:form>

    </ui:define>

</ui:composition>